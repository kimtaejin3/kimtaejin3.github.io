{"componentChunkName":"component---src-templates-blog-post-js","path":"/node-build/","result":{"data":{"site":{"siteMetadata":{"title":"펄의 개발 블로그"}},"markdownRemark":{"id":"6b56eedf-8473-504a-bbad-752633d54f0e","excerpt":"Node.js 용어 Built-in(s), Built-in module(s): Node core에 내장되어 있는 자바스크립트 코드 (C++) bindings: JS Builtins에서 사용되는 C++로 돌아가는 코드 addons: Dynamically-linked shared…","html":"<h2>Node.js 용어</h2>\n<ul>\n<li><strong>Built-in(s), Built-in module(s)</strong>: Node core에 내장되어 있는 자바스크립트 코드</li>\n<li><strong>(C++) bindings</strong>: JS Builtins에서 사용되는 C++로 돌아가는 코드</li>\n<li><strong>addons</strong>: Dynamically-linked shared objects provide APIs via Node-API</li>\n</ul>\n<h2>Node.js 구조</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 573px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c53d25ac71d2065da9ae919d07da8ae4/3c024/image.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 72.15189873417721%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC4klEQVR42o1SXU/TUBjmH3htjAE18Vf4A/wBekXEr3vjFcYLDTEoicKASAJKRBmgMLa13RhtV9qu0K7rPtp98jVilG1Eg/GCCxQYPJ6ejQ/jjU2evM97nvc873t6Tkv98BDmVhFyzYFay56i2gThyllOoNVy2PhRgbJpI0Z4dDONjZ9VuF/Lr73fuBZ8iPOz7Wjz30Gr/3YDvg60Dt1A28dbuMzew6XAXbp+0d+Bq/776Fn04sLoTVx5145zfdfRY042DOv1OkrFIhzbRtZx/oGdzsDQdViJxF/rhUKBxCxy2RwypKZSqTQM9/b2MBcOQxAEiKJ4gmg0CkmSECaax+PB2NgYzY/r3MjzPOWBQADpVOrUkGVZOKRrsVRCnnR2uztZB/l8Hhk7A1mRYRjGiX5cUy6X6WSKosA0zYbh/v4+ggyDRU2DRmAYcVIgY2LCi/HxDxQTXi8YUrO0tEh0nWyOQ1UV2sQ1dqdMkF9yYuiOHAxymPEFEJUU0iCEuYhAIgc1poHlQpjnRTBsmJgkYMQTWJBjpIaHqi0hEplH0rKaR94/AMf4UNCHsWq9RSk+gmVzBCuJN3C0IXBTzyD4X0DnPbDVIWTU13BiQ4iLJCf6emoUoeB7WFb62LCOEPMJn+NPUVjoxPdcN5Zjj1FJdiEvdWKFcJ15QPQnKMqPsLv+CrvlXnzLduOr1YWfpedgpgdgJe3jIx+AZfxgZnoR8vchEuxH2O+hfC7ogcANgvW9BOfrxTzTDzE0SMGzA7SOZ/sxNTGMFHk6J7fMhTlYy3Gk1hI0JlcThFs0pteTYKQglJQMeyNN112k15JUy32xIWgRcmTrzC2z5DLMEESDRUCYBCdPwywqNF+0BUgmabiiQsvwsMs69GyUxuJmEqtbaXDR2VNDd8IQmVDWBajxKIlig5sSFJK7kA2RaBLVT9HIl1IK2EgAqWTzYR8dHWF7exvVSrWJWhPV/0e1hp2dHWr4B2HDk+pNX6ZZAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"alt text\"\n        title=\"\"\n        src=\"/static/c53d25ac71d2065da9ae919d07da8ae4/3c024/image.png\"\n        srcset=\"/static/c53d25ac71d2065da9ae919d07da8ae4/c26ae/image.png 158w,\n/static/c53d25ac71d2065da9ae919d07da8ae4/6bdcf/image.png 315w,\n/static/c53d25ac71d2065da9ae919d07da8ae4/3c024/image.png 573w\"\n        sizes=\"(max-width: 573px) 100vw, 573px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h2>Node.js / node 디렉토리 구조</h2>\n<ul>\n<li><strong>lib</strong>: Javascript builtins (lib/**/*.js, internals, internal/bootstrap)</li>\n<li><strong>src</strong>: src/node_**.cc(bindings), node_api.h (addons), node_main.cc, env.cc</li>\n<li><strong>deps</strong>: v8, libuv, zlib, openssl, undici, sqlite</li>\n<li><strong>tools</strong>: test.py, gyp, lint-md, dep_updaters, actions/conmmit-queue...</li>\n<li><strong>test</strong>: parallel, sequential, cctest, addons, wpt,...</li>\n<li><strong>benchmark</strong>: compare.js, benchmark/**/*.js</li>\n<li><strong>typings</strong>: internal modules code completions (tsconfig.json)</li>\n<li><strong>doc</strong>: *.md</li>\n</ul>\n<h2>빌드 과정</h2>\n<ol>\n<li>configuraton</li>\n<li>build</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">./configure\nmake -j4</code></pre></div>\n<h2>빌드 과정</h2>\n<ul>\n<li>빌드는 실행 파일을 만드는 것.</li>\n<li>구현된 소스 파일 각각을 machine code로 만든다.</li>\n<li>obj, library를 통합해 executable를 만든다.</li>\n<li>Compiler, Linker를 다룰때 많은 파일, 설정이 있는 경우 하나씩 옵션으로 전달하기 어려우므로 make나 ninja 등의 빌드툴을 사용한다.</li>\n<li>make를 이용하여 configuration을 직접 작성하는 것도 어렵기에 다른 빌드툴을 쓴다. (gyp, gn)</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1c39df7d3e493d94f9f700c32a958c6c/bf433/image-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 34.810126582278485%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAAA20lEQVR42o1R2QqDQBDb//838UVEvBAv8MAbvE3JwBbBtnQgxF3GTDKrbNtGlmUgJ0kC1nVduBfPd/wq1fc9yrIUNE2DdV0xz7PwPwIPwbZt4bouwjBEmqYYx1HEu67DeZ4oigKWZcH3fekLggD7vn8X/HQ5TROGYcC2bcJMwTsOI2vXn9agjuMAXdIRf2Rcgi402HPHsizCuvjN4WTFXTEGI/Nx2ExXRBRFcs+ohmHAcRw5cwVVVck6yHmewzRNWdkjMvemnTEiheme4nEcv4fph2NfXdfwPE+EX77FG4ZleeB0AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"alt text\"\n        title=\"\"\n        src=\"/static/1c39df7d3e493d94f9f700c32a958c6c/f058b/image-1.png\"\n        srcset=\"/static/1c39df7d3e493d94f9f700c32a958c6c/c26ae/image-1.png 158w,\n/static/1c39df7d3e493d94f9f700c32a958c6c/6bdcf/image-1.png 315w,\n/static/1c39df7d3e493d94f9f700c32a958c6c/f058b/image-1.png 630w,\n/static/1c39df7d3e493d94f9f700c32a958c6c/40601/image-1.png 945w,\n/static/1c39df7d3e493d94f9f700c32a958c6c/bf433/image-1.png 971w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<ul>\n<li>\n<p>Configuraton을 통해 out/Makefile, out/<strong>/*.mk, out/</strong>/build.ninja 등 빌드 구성 생성</p>\n</li>\n<li>\n<p>GYP, tools/gyp 를 사용, Chromium project, Python 사용. make와 ninja 빌드용 configuration 파일을 생성 가능</p>\n</li>\n<li>\n<p>gyp는 오랫동안 maintained 되지 않음. GN이 대체제이고, 비공식적으로 supported 중.</p>\n</li>\n<li>\n<p>configuration.py는 사용자 옵션 및 빌드환경을 기록한 config.gypi를 생성하고 gyp를 실행</p>\n</li>\n</ul>\n<h2>Node.js 빠른 빌드</h2>\n<ul>\n<li>make -j$(nproc)</li>\n</ul>\n<h2>Node.js Test</h2>\n<ul>\n<li><strong>test/parallel</strong>: 병렬로 실행가능한 테스트. 일반적인 각 모듈의 대한 테스트는 이곳에 작성</li>\n<li><strong>test/sequential</strong>: 순차적으로 실행되어야 하는 테스트</li>\n<li><strong>test/addons</strong>: Node-API 테스트</li>\n<li><strong>test/wpt</strong>: Web 호환성 테스트, Web platform Test 사용</li>\n</ul>","frontmatter":{"title":"Node.js 빌드 및 테스트","date":"July 28, 2024","description":"오픈소스 컨트리뷰션 아카데미 첫 멘토링 내용 / Node.js 빌드 방법 및 테스트"}},"previous":{"fields":{"slug":"/eslint-plugin-react/"},"frontmatter":{"title":"eslint 기여후기"}},"next":null},"pageContext":{"id":"6b56eedf-8473-504a-bbad-752633d54f0e","previousPostId":"765161b4-f1b5-573c-ab65-c4a511639a3a","nextPostId":null}},"staticQueryHashes":["2841359383","3257411868"],"slicesMap":{}}